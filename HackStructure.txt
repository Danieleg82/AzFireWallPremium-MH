Structure of the hack:

INTRO ABOUT FW PREMIUM FEATURES

DEPLOYMENT (BEST IF DONE AT LEAST 1HR BEFORE THE LAB)

TASK1:
ENABLE DIAGNOSTIC LOGS

TASK2
Create Allow ApplicationRule 
Enable IDPS but not TLSi

==============

(doc for IDPS testing: https://learn.microsoft.com/en-us/azure/firewall/premium-deploy)
(doc for TLSi testing: https://techcommunity.microsoft.com/t5/azure-network-security-blog/building-a-poc-for-tls-inspection-in-azure-firewall/ba-p/3676723)

CHALLENGE1:  TLS inspection and IDPS setup

TASK1:
TLSi disabled - Emulate a malicious user agent call to remote website in HTTP (IDPS will mitigate)
TLSi disabled - Emulate a malicious user agent call to remote website in HTTPs (IDPS will mot be able to mitigate)

TASK2:
Enable TLS Inspection in Policy (KV, MI, Cert, etc...)

TASK3:
IMPORT THE CERT ON VM

TASK4:
Update Apprule in the policy for TLS inspection enabled

TASK5:
TLSi enabled - Emulate a malicious user agent call to remote website in HTTPs (IDPS will mitigate)

================

CHALLENGE1:  Customize IDPS

